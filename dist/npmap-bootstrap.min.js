if(!NPMap)throw Error("The NPMap object is required");if("array"!=typeof NPMap&&"object"!=typeof NPMap)throw Error("The NPMap object cannot be a "+typeof NPMap);NPMap={config:NPMap.config||NPMap},function(){function t(t){"string"==typeof t.div&&(t.div=document.getElementById(t.div)),t.spinner.stop(),t.div.removeChild(L.npmap.util._.getChildElementsByClassName(t.div,"npmap-loading")[0]),t.L=L.npmap.map(t),delete t.spinner}function e(){var t=!1;(L.Browser.ie6||L.Browser.ie7)&&(t=!0),L.npmap.util._.appendCssFile(NPMap.path+"npmap.css",function(){t||o()}),t&&L.npmap.util._.appendCssFile(NPMap.path+"npmap.ie.css",o)}function o(){if("array"==typeof NPMap.config)for(var e=0;NPMap.config.length>e;e++)t(NPMap.config[e]);else t(NPMap.config)}function i(t){var e=document.createElement("div");return e.className="npmap-loading",e.style.cssText="background-color:#f9f7f1;height:100%;position:absolute;width:100%;z-index:99999;","string"==typeof t&&(t=document.getElementById(t)),t.appendChild(e),new Spinner({className:"npmap-loading-spinner",color:"#454545",corners:1,direction:1,hwaccel:!0,left:"auto",length:15,lines:13,radius:15,rotate:0,shadow:!1,speed:1,top:"auto",trail:60,width:5,zIndex:2e9}).spin(e)}(function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()})(this,function(){"use strict";function t(t,e){var o,i=document.createElement(t||"div");for(o in e)i[o]=e[o];return i}function e(t){for(var e=1,o=arguments.length;o>e;e++)t.appendChild(arguments[e]);return t}function o(t,e,o,i){var n=["opacity",e,~~(100*t),o,i].join("-"),r=.01+100*(o/i),a=Math.max(1-(1-t)/e*(100-r),t),s=c.substring(0,c.indexOf("Animation")).toLowerCase(),p=s&&"-"+s+"-"||"";return f[n]||(u.insertRule("@"+p+"keyframes "+n+"{"+"0%{opacity:"+a+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}"+"100%{opacity:"+a+"}"+"}",u.cssRules.length),f[n]=1),n}function i(t,e){var o,i,n=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;d.length>i;i++)if(o=d[i]+e,void 0!==n[o])return o;return void 0!==n[e]?e:void 0}function n(t,e){for(var o in e)t.style[i(t,o)||o]=e[o];return t}function r(t){for(var e=1;arguments.length>e;e++){var o=arguments[e];for(var i in o)void 0===t[i]&&(t[i]=o[i])}return t}function a(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function p(t){return this===void 0?new p(t):(this.opts=r(t||{},p.defaults,h),void 0)}function l(){function o(e,o){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',o)}u.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(t,i){function r(){return n(o("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function a(t,a,p){e(f,e(n(r(),{rotation:360/i.lines*t+"deg",left:~~a}),e(n(o("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:p}),o("fill",{color:s(i.color,t),opacity:i.opacity}),o("stroke",{opacity:0}))))}var p,l=i.length+i.width,c=2*l,d=2*-(i.width+i.length)+"px",f=n(r(),{position:"absolute",top:d,left:d});if(i.shadow)for(p=1;i.lines>=p;p++)a(p,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(p=1;i.lines>=p;p++)a(p);return e(t,f)},p.prototype.opacity=function(t,e,o,i){var n=t.firstChild;i=i.shadow&&i.lines||0,n&&n.childNodes.length>e+i&&(n=n.childNodes[e+i],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=o))}}var c,d=["webkit","Moz","ms","O"],f={},u=function(){var o=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],o),o.sheet||o.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};p.defaults={},r(p.prototype,{spin:function(e){this.stop();var o,i,r=this,s=r.opts,p=r.el=n(t(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),l=s.radius+s.length+s.width;if(e&&(e.insertBefore(p,e.firstChild||null),i=a(e),o=a(p),n(p,{left:("auto"==s.left?i.x-o.x+(e.offsetWidth>>1):parseInt(s.left,10)+l)+"px",top:("auto"==s.top?i.y-o.y+(e.offsetHeight>>1):parseInt(s.top,10)+l)+"px"})),p.setAttribute("role","progressbar"),r.lines(p,r.opts),!c){var d,f=0,u=(s.lines-1)*(1-s.direction)/2,h=s.fps,m=h/s.speed,g=(1-s.opacity)/(m*s.trail/100),y=m/s.lines;(function v(){f++;for(var t=0;s.lines>t;t++)d=Math.max(1-(f+(s.lines-t)*y)%m*g,s.opacity),r.opacity(p,t*s.direction+u,d,s);r.timeout=r.el&&setTimeout(v,~~(1e3/h))})()}return r},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,r){function a(e,o){return n(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:o,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*l+r.rotate)+"deg) translate("+r.radius+"px"+",0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var p,l=0,d=(r.lines-1)*(1-r.direction)/2;r.lines>l;l++)p=n(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:c&&o(r.opacity,r.trail,d+l*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(p,n(a("#000","0 0 4px #000"),{top:"2px"})),e(i,e(p,a(s(r.color,l),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,o){t.childNodes.length>e&&(t.childNodes[e].style.opacity=o)}});var m=n(t("group"),{behavior:"url(#default#VML)"});return!i(m,"transform")&&m.adj?l():c=i(m,"animation"),p});var n=document.createElement("script"),r=document.getElementsByTagName("script");if("array"==typeof NPMap.config)for(var a=0;NPMap.config.length>a;a++)NPMap.config[a].spinner=i(NPMap.config[a].div);else NPMap.config.spinner=i(NPMap.config.div);for(var a=0;r.length>a;a++){var s=r[a].src;if("string"==typeof s&&-1!==s.indexOf("npmap-bootstrap.js")){NPMap.path=s.replace("npmap-bootstrap.js","");break}}n.src=NPMap.path+"npmap.js",n.readyState?n.onreadystatechange=function(){("loaded"===n.readyState||"complete"===n.readyState)&&(n.onreadystatechange=null,e())}:n.onload=function(){e()},document.body.appendChild(n)}();